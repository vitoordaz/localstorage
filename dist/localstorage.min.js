define("localstorage",[],function(){"use strict";var a=function(a){var b=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},1)},b=function(){},c=!1,d={},e=(!!window.localStorage,chrome&&chrome.storage&&chrome.storage.local);return e?{init:function(a){chrome.storage.local.get(null,function(b){d=b,c=!0,a()})},clear:function(a){if(!c)throw Error("localstorage.init was not called");a=a||b,chrome.storage.local.clear(a),d={}},setItem:function(a,e,f){if(!c)throw Error("localstorage.init was not called");f=f||b;var g={};g[a]=e,chrome.storage.local.set(g,f),d[a]=e},getItem:function(a,e){if(!c)throw Error("localstorage.init was not called");return e=e||b,chrome.storage.local.get(a,function(b){d[a]=b[a],e(b[a])}),d[a]},removeItem:function(a,e){if(!c)throw Error("localstorage.init was not called");e=e||b,chrome.storage.local.remove([a],e),delete d[a]}}:{init:a,clear:localStorage.clear,setItem:localStorage.setItem,getItem:localStorage.getItem,removeItem:localStorage.removeItem}});