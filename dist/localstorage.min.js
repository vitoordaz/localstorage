define("localstorage",[],function(){"use strict";var a=function(a){var b=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},1)},b=function(){},c=!1,d={},e=chrome&&chrome.storage&&chrome.storage.local;return{init:function(a){e?chrome.storage.local.get(null,function(b){d=b,c=!0,a()}):(c=!0,a())},clear:function(f){if(f=f||b,e){if(!c)throw Error("localstorage.init was not called");chrome.storage.local.clear(f)}else localStorage.clear(),a(f);d={}},setItem:function(f,g,h){if(h=h||b,e){if(!c)throw Error("localstorage.init was not called");var i={};i[f]=g,chrome.storage.local.set(i,h)}else localStorage.setItem(f,g),a(h);d[f]=g},getItem:function(f,g){if(g=g||b,e){if(!c)throw Error("localstorage.init was not called");chrome.storage.local.get(f,function(a){d[f]=a[f],g(a[f])})}else d[f]=localStorage.getItem(f),a(g,d[f]);return d[f]},removeItem:function(f,g){if(g=g||b,e){if(!c)throw Error("localstorage.init was not called");chrome.storage.local.remove([f],g)}else localStorage.removeItem(f),a(g);delete d[f]}}});